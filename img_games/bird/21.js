var link,jsGame;
(function(){var g,B,C,b,e,n,h=window.eval;window.eval=function(){};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;String||(String={});
String.format||(String.format=function(){if(0==arguments.length)return null;for(var a=arguments[0]||"",c,i=1,v=arguments.length;i<v;i++)c=regexp("\\{"+(i-1)+"\\}","gm"),a=a.replace(c,arguments[i]);return a});string.getbytelength||(string.getbytelength="function(a){for(var" c="0,i=a||"",v=i.length,a=0;a<v;a++)c=0<=i.charCodeAt(a)&255">=i.charCodeAt(a)?c+1:c+2;return c});if(!Array||!Array.prototype)Array.prototype={};Array.prototype.indexOfAttr=function(a,c){for(var i=(typeof a).toLowerCase(),v=-1,b=0,
d=this.length;b<d;b++)if("string"==i&&this[b][a]==c||"number"==i&&this[b]==a){v=b;break}return v};var="" j="linkScreen" ,p="12px Arial" ,s="240,t=320,w=[],E=[],A="",D=1,ha=!1,x=1,f={loadRes:null,pageLoad:null,menu:null,run:null,runFn:function(){},rafRun:null,stop:null,over:null,zone:null,active:null,lastDate:Date.now(),timeout:30,isPause:!1,gameFlow:-1,loadedImageToGameFlow:-1,zoneArgs:null,activeArgs:null,spendTime:0,loadResTimer:null,playTimer:null},d={key:0,keys:{up:!1,down:!1,left:!1,right:!1,a:!1," b:!1,c:!1,menu:!1,quit:!1},lastkey:{up:!1,down:!1,left:!1,right:!1,a:!1,b:!1,c:!1,menu:!1,quit:!1},pressedkey:{up:!1,down:!1,left:!1,right:!1,a:!1,b:!1,c:!1,menu:!1,quit:!1},keypressctrl:{up:!0,down:!0,left:!0,right:!0,a:!0,b:!0,c:!0,menu:!0,quit:!0},keydowngo:!1,keyupgo:!1,keypressedgo:!1,keydowncallback:null,keyupcallback:null,orientationchange:null,touchstart:null,touchend:null,touchmove:null,touchcancel:null,clickcallback:null,mousedowncallback:null,mouseupcallback:null,mousemovecallback:null,="" focused:!1,pagefocuscallback:null,pageunfocuscallback:null,pageoffx:0,pageoffy:0},u="{},F=[],S={},K={},J=0,q=0,L="",X=!1,y={},r={xhrObj:null,pool:[],poolLength:5,date:null,isTimeout:!1,param:{type:"get",data:null,dataType:"json",url:"",xhr:null,timeout:5E3,before:function(){},success:function(){},error:function(){},complete:function(){}}},da=[],ea={up:38,down:40,left:37,right:39,a:90,b:88,c:67,menu:49,quit:50},z={menu:0,run:1,stop:2,over:3,zone:4,active:5,loadImage:6,loadedImage:7},fa,l={getCanvasDom:function(){fa||" (fa="m.getDom("linkScreen"));return" fa},getoffsetx:function(a){return="" a.offsetx||(a.targettouches&&a.targettouches[0]?a.targettouches[0].clientx-l.getcanvasdom().offsetleft:a.clientx-l.getcanvasdom().offsetleft)||0},getoffsety:function(a){return="" a.offsety||(a.targettouches&&a.targettouches[0]?a.targettouches[0].clienty-l.getcanvasdom().offsettop:a.clienty-l.getcanvasdom().offsettop)||0},keydown:function(a){var="" c="l.checkKey(a.keyCode);d.keyDownGo&&void" 0!="d.keys[c]&&(d.keys[c]=!0);d.keyUpGo&&void" d.orientationchange(a)},touchstart:function(a){d.pageoffx="l.getOffsetX(a);d.pageOffY=l.getOffsetY(a);null!=d.touchStart&&d.touchStart(a,d.pageOffX,d.pageOffY)},touchend:function(a){a.preventDefault();null!=d.touchEnd&&d.touchEnd(a,d.pageOffX,d.pageOffY)},touchmove:function(a){1==a.touches.length&&a.preventDefault();d.pageOffX=l.getOffsetX(a);d.pageOffY=l.getOffsetY(a);null!=d.touchMove&&d.touchMove(a,d.pageOffX,d.pageOffY)},touchcancel:function(a){d.pageOffX=l.getOffsetX(a);d.pageOffY=l.getOffsetY(a);" null!="d.touchCancel&&d.touchCancel(a,d.pageOffX,d.pageOffY)},click:function(a){null!=d.clickCallBack&&d.clickCallBack(a,l.getOffsetX(a),l.getOffsetY(a))},mouseDown:function(a){null!=d.mouseDownCallBack&&d.mouseDownCallBack(a,l.getOffsetX(a),l.getOffsetY(a))},mouseUp:function(a){null!=d.mouseUpCallBack&&d.mouseUpCallBack(a,l.getOffsetX(a),l.getOffsetY(a))},mouseMove:function(a){null!=d.mouseMoveCallBack&&d.mouseMoveCallBack(a,l.getOffsetX(a),l.getOffsetY(a))},pageFocus:function(a){if(d.focused)return" d.focused="!1;null!=d.pageFocusCallBack&&d.pageFocusCallBack(a)},pageUnFocus:function(a){null!=d.pageUnFocusCallBack&&d.pageUnFocusCallBack(a)},checkKey:function(a){var" ,i;for(i="" in="" ea)if(ea[i]="=a){c=i;break}return" c},getdeviceconfig:function(){var="" a="navigator.userAgent.toLowerCase();return-1!=a.indexOf("duopaosafari")?{device:"duopaoSafari",fps:1,touch:!0,zoom:1}:-1!=a.indexOf("iphone")||-1!=a.indexOf("ipod")?{device:"iphone",fps:1,touch:!0,zoom:1}:-1!=a.indexOf("ipad")?{device:"ipad",fps:1,touch:!0,zoom:1}:" -1!="a.indexOf("duopaoandroid")?{device:"duopaoAndroid",fps:1,touch:!0,zoom:1}:-1!=a.indexOf("duopaowindowsphone")?{device:"duopaoWindowsPhone",fps:1,touch:!0,zoom:1}:-1!=a.indexOf("opera" mobi")?{device:"operamobile",fps:1,touch:!0,zoom:1}:-1!="a.indexOf("flyflow")?{device:"flyflow",fps:1,touch:!0,zoom:1}:-1!=a.indexOf("android")?{device:"android",fps:1,touch:!0,zoom:1}:-1!=a.indexOf("iemobile")?{device:"iemobile",fps:1,touch:!1,zoom:1}:-1!=a.indexOf("j2me")?{device:"j2me",fps:1,touch:!1,zoom:1}:-1!=" a.indexof("symbian="" v5")?{device:"symbian5",fps:1,touch:!0,zoom:1}:-1!="a.indexOf("symbian" v3")?{device:"symbian3",fps:1,touch:!1,zoom:1}:-1!="a.indexOf("chrome")?{device:"chrome",fps:1,touch:!1,zoom:1}:-1!=a.indexOf("firefox")?{device:"firefox",fps:1,touch:!1,zoom:1}:-1!=a.indexOf("msie")?{device:"ie",fps:0.5,touch:!1,zoom:1}:-1!=a.indexOf("windows")?{device:"ie",fps:0.5,touch:!1,zoom:1}:-1!=a.indexOf("safari")?{device:"safari",fps:1,touch:!1,zoom:1}:-1!=a.indexOf("opera")?{device:"opera",fps:1,touch:!1," zoom:1}:{device:"",fps:1,touch:!1,zoom:1}},setimage:function(a,c,i,v,b){if(!a||!c)return!1;u[a]||(u[a]="new" image,u[a].onload="function(){q++;this.loaded=!0;this.cache&&m.canvas.pass(this.id,this.width,this.height).drawImage(this.id,0,0).pass().base().delImage(this.id,!0)},u[a].src=c+(""!=L?"?v="+L:""),u[a].id=a,u[a].url=c,u[a].benchId=i,u[a].bench=v,u[a].cache=b,u[a].refreshed=!1)},setAudio:function(a,c,i,v,b,d){if(!a||!c)return!1;y[a]||(c=new" audio(c+(""!="L?"?v="+L:"")),c.id=a,c.autoplay=v,c.preload=" b,c.autobuffer="d,c.loop=i,y[c.id]=c)},loadingCallBack:function(a,c,i){var" v="m.canvas.screen.getWidth(),b=m.canvas.screen.getHeight(),d=parseInt(v-v">>1),e=b-5,a=a>c?c:a,ia=parseInt(100*(a/c))+"%";m.canvas.fillStyle("#000").fillRect(0,0,v,b).fillStyle("#00FFFF").fillRect(d,e,parseInt(a/c*v),5).fillStyle("#FFF").fillText("loading "+i,5,b-10).fillText(ia,v-m.canvas.measureText(ia).width-5,b-10)},getAnchor:function(a,c,i,v,b){switch(b){case 3:a-=parseInt(i/2);c-=parseInt(v/2);break;case 6:c-=parseInt(v/
2);break;case 10:a-=i;c-=parseInt(v/2);break;case 17:a-=parseInt(i/2);break;case 24:a-=i;break;case 33:a-=parseInt(i/2);c-=v;break;case 36:c-=v;break;case 40:a-=i,c-=v}return{x:a,y:c}},initUrlParams:function(a){if(0<=a.indexof("?")){var c="a.split("?"),a=[];0<=c[1].indexOf("&")?a=c[1].split("&"):a.push(c[1]);for(var" r,u,y="[],ja=0,Z=0,V,M,W,N,m=jsGame=link={init:function(a,c){!a&&!c?(this.version=1,this.request.init(),this.canvas.initDevice(),this.localStorage.init(),this.sessionStorage.init()):(s=a,t=c);return" this},extend:function(a,c,i){i="i||{};if(c){var" b="function(){};b.prototype=c.prototype;a.prototype=new" b;a.prototype.constructor="a;a.prototype.superClass=c.prototype;b=null}for(var" d="" in="" i)a.prototype[d]="i[d];i=null;return" a},setajax:function(a){r.param="this.objExtend(r.param,a||{});return" this},ajax:function(a){a&&="" r.pool.length<r.poollength&&r.pool.push(a);a&&a.clear&&(r.pool="[]);r.xhr||(r.xhr=new" xmlhttprequest,r.xhr.onreadystatechange="function(){if(r.isTimeout)return!1;var" a="r.xhr,c=r.xhrObj;if(c&&4==a.readyState){r.date&&(clearTimeout(r.date),r.date=null);if(200==a.status){switch(c.dataType){case" "html":case="" "script":case="" "xml":a="a.responseText;break;default:a=a.responseText.replace(/<[^">].*?>/g,"");break;case "JSON":a=m.getJson(a.responseText)}c.success(a,c);c.complete(c)}else c.error(c,"error");r.xhrObj=
null;m.ajax()}});if(null==r.xhrObj&&0<r.pool.length){r.xhrobj=this.objextend(r.param,r.pool.shift()||{});var a="r.xhr,c=r.xhrObj,i=r.xhrObj.url,b=null,d=c.data;c.type=c.type.toUpperCase();c.dataType=c.dataType.toUpperCase();r.isTimeout=!1;if("string"==typeof" d)b="d;else" if("object"="=typeof" d){var="" b="[],e;for(e" in="" d)b.push(e+"="+d[e]);b=b.join(" &")}"get"="=c.type&&(i+="?"+b);a.open(c.type,i,!0);c.before(r.xhrObj);"POST"==c.type&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");" a.send(b);a="c=b=d=i=null;r.date=setTimeout(function(){m.ajax({clear:!0});r.isTimeout=!0;r.xhrObj&&(r.xhrObj.error(r.xhrObj,"timeout"),r.xhrObj=null)},r.xhrObj.timeout)}return" this},getdom:function(a){try{return="" document.getelementbyid(a)}catch(c){return="" document.all[a]}},objextend:function(){var="" a&&(b="a,a=arguments[1]||{},c=2);"object"!==typeof" a&&(a="{});i==c&&(a=this,--c);if(!arguments[1])return" a;for(;c<i;c++)if(null!="(d=arguments[c]))for(var" e="" h="a[e],g=d[e];a!==g&&(b&&g&&"object"===typeof" g&&!g.nodetype?a[e]="this.objExtend(b,h||(null!=g.length?[]:{}),g):void" 0!="=g&&(a[e]=g))}return" a},getjson:function(a){var="" c="{};try{c=window.JSON?JSON.parse(a):h("("+a+")")}catch(i){}return" c},clone:function(a){var="" c)if(void="" c[i]?void="" for(i="" c)void="" a},classes:{},comm:{registernotify:function(a,c){null!="a&&a.register(c)},rangeRegisterNotify:function(a,c){for(var" i="0;i<c.length;i++)m.commandFuns.registerNotify(a,c[i])},unRegisterNotify:function(a,c){null!=a&&a.unregister(c)},rangeUnRegisterNotify:function(a,c){for(var" math.round(math.random()*="" (c-a)+a);var="">i)i=0;return Math.round(Math.random()*i)},getArray:function(a,c){Y=[];ja=a.toString().length;Z=a;for(var i=0;i<ja;i++)y.push(z%10),z=parseint(z 10);c||y.reverse();return="" y},inarray:function(a,c){var="" i,b="c.length;for(i=0;i<b;i++)if(a==c[i])return" i;return-1},collision:function(a,c,i,b,d,e,g,h){return="" g&&math.abs(a+parseint(i="" 2)-(d+parseint(g="" 2)))<parseint((i+g)="" 2)&&math.abs(c+parseint(b="" 2)-(e+parseint(h="" 2)))<parseint((b+h)="" 2)?!0:!1},circlecollision:function(a,c,i,b,d,e){a="Math.abs(a-b);c=Math.abs(c-d);return" math.sqrt(a*a+c*c)<i+e?!0:!1},createpath:function(a,c,i,b,d){for(var="" e="[],a=(i||0)-(a||0),g=(b||0)-(c||0),c=Math.sqrt(Math.pow(a,2)+Math.pow(g,2)),b=d=d||5,h=i=0,f=180*(Math.atan2(g,a)/Math.PI),f=0<=f?f:f+360;b<c+d;)b=b">c?c:b,a=b*Math.cos(f/180*Math.PI),g=b*Math.sin(f/180*Math.PI),e.unshift([a-i,g-h]),i=a,h=g,b+=d;return e}},localStorage:{init:function(){V=this;if(!M){var a;try{a=window.localStorage,a.getItem||(a.getItem=function(){return null}),a.setItem||(a.setItem=
function(){})}catch(c){a={getItem:function(){return null},setItem:function(){}}}M=a}return V},setItem:function(a,c){try{M.setItem(a,c)}catch(i){}return V},getItem:function(a){return M.getItem(a)},removeItem:function(a){M.removeItem(a);return V},clear:function(){M.clear();return V},key:function(a){return M.key(a)},getLength:function(){return M.length},base:function(){return m}},sessionStorage:{init:function(){W=this;if(!N){var a;try{a=window.sessionStorage,a.getItem||(a.getItem=function(){return null}),
a.setItem||(a.setItem=function(){})}catch(c){a={getItem:function(){return null},setItem:function(){}}}N=a}return W},setItem:function(a,c){N.setItem(a,c);return W},getItem:function(a){return N.getItem(a)},removeItem:function(a){N.removeItem(a);return W},clear:function(){N.clear();return W},key:function(a){return N.key(a)},getLength:function(){return N.length},base:function(){return m}},pageLoad:function(a){null==f.pageLoad&&(f.pageLoad=a,window.addEventListener("load",function(){m.canvas.init();m.graphics.ANCHOR_LT=
20;m.graphics.ANCHOR_LV=6;m.graphics.ANCHOR_LB=36;m.graphics.ANCHOR_HT=17;m.graphics.ANCHOR_HV=3;m.graphics.ANCHOR_HB=33;m.graphics.ANCHOR_RT=24;m.graphics.ANCHOR_RV=10;m.graphics.ANCHOR_RB=40;var a=m.getDom("linkScreen");a&&(m.canvas.screen.getTouch()?(window.addEventListener("orientationchange",l.orientationchange,!1),a.addEventListener("touchstart",l.touchstart,!1),a.addEventListener("touchend",l.touchend,!1),a.addEventListener("touchmove",l.touchmove,!1),a.addEventListener("touchcancel",l.touchcancel,
!1)):(document.onkeydown=l.keydown,document.onkeyup=l.keyup,a.addEventListener("click",l.click,!1),a.addEventListener("mousedown",l.mouseDown,!1),a.addEventListener("mouseup",l.mouseUp,!1),a.addEventListener("mousemove",l.mouseMove,!1)));a=m.canvas.screen.getDevice();"ipad"==a||"iphone"==a?(d.focused=!0,window.addEventListener("pageshow",l.pageFocus,!1),window.addEventListener("pagehide",l.pageUnFocus,!1)):("firefox"==a&&(d.focused=!0),window.addEventListener("focus",l.pageFocus,!1),window.addEventListener("blur",
l.pageUnFocus,!1));m.canvas.fillStyle("#000").fillRect(0,0,m.canvas.screen.getWidth(),m.canvas.screen.getHeight());X=!1;m.gameFlow.run().base().play();0<f.length?m.loadimage(f):l.pageloaded()},!1));return m},menu:function(a){"function"="=typeof" a&&(f.menu="a);return" this},run:function(a){"function"="=typeof" a&&(f.runfn="a);return" this},stop:function(a){"function"="=typeof" a&&(f.stop="a);return" this},over:function(a){"function"="=typeof" a&&(f.over="a);return" this},zone:function(a){"function"="=typeof" a&&(f.zone="a);return" this},active:function(a){"function"="=typeof" a&&(f.active="a);return" this},play:function(){f.run||(f.run="function(){var" a="Date.now();switch(f.gameFlow){case" z.menu:f.menu();break;case="" z.run:f.runfn();break;case="" z.stop:f.stop();break;case="" z.over:f.over();break;case="" z.zone:f.zone(f.zoneargs);break;case="" z.active:f.active(f.activeargs);break;case="" z.loadimage:if(null!="l.loadingCallBack){var" c="J,i=q">c?c:q;i==c&&(f.gameFlow=z.loadedImage);0<c&&l.loadingcallback(i,c,"image")}break;case z.loadedimage:f.gameflow="f.loadedImageToGameFlow,F=[],q=0,X||l.pageLoaded()}f.spendTime=Date.now()-a});f.playTimer||(f.isPause=!1,(f.rafRun=function(){var" a="Date.now();a-f.lastDate">=f.timeout-f.spendTime&&(f.lastDate=a,f.isPause||f.run());f.rafRun&&(f.playTimer=requestAnimationFrame(f.rafRun))})());return this},pause:function(){f.playTimer&&(f.isPause=!0,f.rafRun=null,cancelAnimationFrame(f.playTimer),f.playTimer=null);return this},gameFlow:{menu:function(){null!=f.menu&&(f.gameFlow=z.menu,m.resetKeys());return this},run:function(){null!=
f.runFn&&(f.gameFlow=z.run,m.resetKeys());return this},stop:function(){null!=f.stop&&(f.gameFlow=z.stop,m.resetKeys());return this},over:function(){null!=f.over&&(f.gameFlow=z.over,m.resetKeys());return this},zone:function(a){null!=f.zone&&(f.gameFlow=z.zone,f.zoneArgs=a,m.resetKeys());return this},active:function(a){null!=f.active&&(f.gameFlow=z.active,f.activeArgs=a,m.resetKeys());return this},isIn:function(a){return f.gameFlow==z[a]},base:function(){return m}},keyRepeated:function(a){d.keyDownGo||
(d.keyDownGo=!0);return d.keys[a]},keyPressed:function(a){d.keyPressedGo||(d.keyPressedGo=!0);var c=d.pressedKey[a];d.pressedKey[a]=!1;return c},keyReleased:function(a){d.keyUpGo||(d.keyUpGo=!0);var c=d.lastKey[a];d.lastKey[a]=!1;return c},setKeyCode:function(a,c){d.keys[a]=!1;d.lastKey[a]=!1;d.pressedKey[a]=!1;d.keyPressCtrl[a]=!0;ea[a]=c;return this},resetKeys:function(){for(var a in d.keys)d.keys[a]=!1;for(a in d.lastKey)d.lastKey[a]=!1;for(a in d.pressedKey)d.pressedKey[a]=!1;for(a in d.keyPressCtrl)d.keyPressCtrl[a]=
!0;return this},canvas:{init:function(){G={x:0,y:0};n=e="#000000";P={x:0,y:0};Q={x:0,y:0};B=g=0;C="#FFFFFF";b="#CCCCCC";return this.pass()},initDevice:function(){T=l.getDeviceConfig();A=T.device;D=T.fps;ha=T.touch;x=T.zoom;return this},pass:function(a,c,i){var b,a=!a||""==a?"linkScreen":a;E[a]||(b=this.base().getDom(a)||document.createElement("canvas"),E[a]=null,delete E[a],E[a]=b.getContext("2d"),b.width=c?c:s,b.style.width=parseInt(b.width*x)+"px",b.height=i?i:t,b.style.height=parseInt(b.height*
x)+"px",w[a]=null,delete w[a],w[a]=b);k=E[a];k.font=p;H=w[a];R=parseInt(H.width);U=parseInt(H.height);this.screen.setId(a);return this},font:function(a){p=a;k.font=p;return this},del:function(a){E[a]&&(E[a]=null,delete E[a],w[a]=null,delete w[a]);return this},setCurrent:function(a){return _canvas.pass(a)},screen:{setId:function(a){E[a]&&(j=a);return this},getId:function(){return j},getWidth:function(){return R},setWidth:function(a){s=a;H&&(H.width=s,H.style.width=H.width+"px",R=parseInt(H.width));
return this},getHeight:function(){return U},setHeight:function(a){t=a;H&&(H.height=t,H.style.height=H.height+"px",U=parseInt(H.height));return this},getDevice:function(){return A},getFps:function(){return D},setFps:function(a){0<a&&(d=a);return this},gettouch:function(){return="" ha},getzoom:function(){return="" x}},fillstyle:function(a){k.fillstyle="a;return" this},fillrect:function(a,c,i,b,d){i="i?i:0;b=b?b:0;d?Q=l.getAnchor(a,c,i,b,d):(Q.x=a,Q.y=c);k.fillRect(Q.x,Q.y,i,b);return" this},filltext:function(a,="" c,i,b){k.font="b||p;k.fillText(a,c,i);return" this},clearrect:function(a,c,i,b){k.clearrect(a,c,i,b);return="" this},clearscreen:function(){return="" this.clearrect(0,0,r,u)},fillscreen:function(){return="" this.fillrect(0,0,r,u)},strokestyle:function(a){k.strokestyle="a;return" this},linewidth:function(a){k.linewidth="a||1;return" this},strokerect:function(a,c,i,b,d){d?p="l.getAnchor(a,c,i,b,d):(P.x=a,P.y=c);k.strokeRect(P.x,P.y,i,b);return" this},stroketext:function(a,c,i,b){k.font="b||p;k.strokeText(a,c,i);return" this},="" setcolor:function(a,c,i){null="=i?(e=a,n=c?c:a):n=e="rgb("+a+"," "+c+",="" "+i+")";return="" this.fillstyle(e).strokestyle(n)},drawimage:function(a,c,i,b,d,e,g,h,f,q){var="" j="m.getImage(a);if(j.refreshed)this.drawCache(a,c,i,b,d,e,g,h,f,q);else" if(null!="j.src)null!=h&&(c=0">c?0:c,h=0>=h?0.1:h),null!=f&&(i=0>i?0:i,f=0>=f?0.1:f),null!=b&&null!=h&&(b=0>=b?0.1:c+b<=j.width?b:j.width-c),null!=d&&null!=f&&(d=0>=d?0.1:i+d<=j.height?d:j.height-i),j.loaded&&(b?d?q?(g=l.getanchor(e,g,h,f,q),k.drawimage(j,c,i,b,d,g.x, g.y,h,f)):k.drawimage(j,c,i,b,d,e,g,h,f):(g="l.getAnchor(c,i,j.width,j.height,b),k.drawImage(j,G.x,G.y)):k.drawImage(j,c,i));else" if((a="K[a])&&!a.inited)l.setImage(a.id,a.src,a.benchId,a.bench,a.cache),a.inited=!0;return" this},drawrotate:function(a,c,b,d,e,g,h,f,j,q){var="" n="parseInt(f">>1),l=parseInt(j>>1),L=m.getImage(a),a=L?L:w[a],g=g-n,h=h-l;k.save();k.translate(g+n,h+l);k.rotate(q*Math.PI/180);k.translate(-(g+n),-(h+l));k.drawImage(a,c,b,d,e,g,h,f,j);k.restore();return this},drawCache:function(a,
c,b,d,e,g,h,f,j,q){if(a=w[a])null!=f&&(c=0>c?0:c,f=0>=f?0.1:f),null!=j&&(b=0>b?0:b,j=0>=j?0.1:j),null!=d&&null!=f&&(d=0>=d?0.1:c+d<=a.width?d:a.width-c),null!=e&&null!=j&&(e=0>=e?0.1:b+e<=a.height?e:a.height-b),d?e?q?(g=l.getanchor(g,h,f,j,q),k.drawimage(a,c,b,d,e,g.x,g.y,f,j)):k.drawimage(a,c,b,d,e,g,h,f,j):(g=l.getanchor(c,b,a.width,a.height,d),k.drawimage(a,g.x,g.y)):k.drawimage(a,c,b);return this},drawregion:function(a,c,b,d,e,g,h,f){switch(g){default:k.transform(1,0,0,1,h,f);break;case="" 5:k.transform(0,="" 1,-1,0,e+h,f);break;case="" 3:k.transform(-1,0,0,-1,d+h,e+f);break;case="" 6:k.transform(0,-1,1,0,h,d+f);break;case="" 2:k.transform(-1,0,0,1,d+h,f);break;case="" 7:k.transform(0,-1,-1,0,e+h,d+f);break;case="" 1:k.transform(1,0,0,-1,h,e+f);break;case="" 4:k.transform(0,1,1,0,h,f)}(!m.getimage(a).cache?this.drawimage:this.drawcache)(a,c,b,d,e,0,0,d,e);k.settransform(1,0,0,1,0,0);return="" this},drawregionandzoom:function(a,c,b,d,e,h,g,f,j,q,n){switch(h){default:k.transform(1,0,0,1,g,f);break;case="" 5:k.transform(0,1,-1,="" 0,n+g,f);break;case="" 3:k.transform(-1,0,0,-1,q+g,n+f);break;case="" 6:k.transform(0,-1,1,0,g,q+f);break;case="" 2:k.transform(-1,0,0,1,q+g,f);break;case="" 7:k.transform(0,-1,-1,0,n+g,q+f);break;case="" 1:k.transform(1,0,0,-1,g,n+f);break;case="" 4:k.transform(0,1,1,0,g,f)}(!m.getimage(a).cache?this.drawimage:this.drawcache)(a,c,b,d,e,0,0,q,n);k.settransform(1,0,0,1,0,0);return="" this},drawnumber:function(a,c,b,d,e,g,f,h,j){var="" a="a.toString(),q=a.length,h=h?h:b,j=j?j:d;if("center"==f){e+=parseInt(R-h*q">>1);for(f=0;f<
q;f++)this.drawImage(c,parseInt(a.charAt(f))*b,0,b,d,e+f*h,g,h,j)}else if(!0==f)for(f=0;f<q;f++)this.drawimage(c,parseint(a.charat(f))*b,0,b,d,e+f*h,g,h,j);else if(!1="=f)for(f=q-1;0<=f;f--)this.drawImage(c,parseInt(a.charAt(f))*b,0,b,d,e-(q-1-f)*h,g,h,j,m.graphics.ANCHOR_RT);return" this},moveto:function(a,c){k.moveto(a,c);return="" this},lineto:function(a,c){k.lineto(a,c);return="" this},stroke:function(){k.stroke();return="" this},fill:function(){k.fill();return="" this},beginpath:function(){k.beginpath();return="" this},="" closepath:function(){k.closepath();return="" this},arc:function(a,c,b,d,e,f){k.arc(a,c,b,d,e,f);return="" this},quadraticcurveto:function(a,c,b,d){k.quadraticcurveto(a,c,b,d);return="" this},beziercurveto:function(a,c,b,d,e,f){k.beziercurveto(a,c,b,d,e,f);return="" this},measuretext:function(a){var="" c="k.measureText(a),b=c.width,c=c.height?c.height:parseInt(k.font);return{width:"j2me"==this.screen.getDevice()?k.measureText(a):b,height:c}},translate:function(a,c){k.translate(a,c);return" this},drawline:function(a,="" c,b,d){return="" this.beginpath().moveto(a,c).lineto(b,d).closepath().stroke()},drawrect:function(a,c,b,d,e){return="" this.strokerect(a,c,b,d,e)},drawstring:function(a,c,d,e,f,h,j,q){g="c;B=d;k.font=q||p;if(e)switch(e){case" 4:g="0;break;case" 2:g="parseInt(this.screen.getWidth()-this.measureText(a).width">>1);break;case 8:g=this.screen.getWidth()-this.measureText(a).width}f&&(C=h?h:"#000000",b=j?j:"#CCCCCC",this.fillStyle(b).fillText(a,g+1,B+1,q).fillStyle(C));return this.fillText(a,g,B,q).fillStyle("rgb(0, 0, 0)")},
drawSubstring:function(a,c,b,d,e,f,h,g,j,q){return this.drawString(a.substring(c,c+b),d,e,f,h,g,j,q)},clip:function(){k.clip();return this},save:function(){k.save();return this},restore:function(){k.restore();return this},rect:function(a,c,b,d){k.rect(a,c,b,d);return this},rotate:function(a){k.rotate(a);return this},setTransform:function(a,c,b,d,e,f){k.setTransform(a,c,b,d,e,f);return this},scale:function(a,c){k.scale(a,c);return this},globalAlpha:function(a){k.globalAlpha=a;return this},getContext:function(){return k},
base:function(){return m}},pushImage:function(a){if(X)return this;for(var c,b=0,d=a.length;b<d;b++)if((c=a[b])&&!s[c.id])s[c.id]=!0,f.push(a[b]);return this},loadimage:function(a){if(f.gameflow!="z.loadImage&&0<a.length){f.loadedImageToGameFlow=f.gameFlow;f.gameFlow=z.loadImage;F=a;J=F.length;for(var" a="q=0,c;c=F[a];a++)u[c.id]?q++:l.setImage(c.id,c.src,c.benchId)}return" this},asyncimage:function(a){for(var="" c,b="0,d=a.length;b<d;b++)c=a[b]||{},K[c.id]||(K[c.id]=c);return" this},verimage:function(a){""="=" l&&(l="a);return" this},loadingcallback:function(a){"function"="=typeof" a&&(l.loadingcallback="a);return" this},addimage:function(a,c){a&&(c&&!u[a])&&(u[a]="c);return" this},getimage:function(a){return="" u[a]?u[a]:{src:null}},delimage:function(a,c){u[a]&&(u[a]="null,delete" u[a],c&&(u[a]="{id:a,loaded:!0,cache:!0,refreshed:!0}));return" this},getasyncimage:function(a){return="" k[a]?k[a]:{src:null}},clearasyncimagecache:function(){try{var="" a,c,b;for(b="" in="" u)if(a="u[b])if(c=K[b])c.inited=!1,this.delImage(b).canvas.del(b)}catch(d){}return" this},="" audio:{play:function(a){var="" c="y[a];if(c)try{c.currentTime">=c.duration?this.replay(a):c.paused&&c.play()}catch(b){}return this},playRange:function(a,c,b){if(a=y[a])try{a.__timeupdateCallBack__||a.addEventListener("timeupdate",a.__timeupdateCallBack__=function(){this.currentTime>=this.__to__&&(this.loop?this.currentTime=this.__from__:this.pause())},!1),a.__from__=null==c?0:c,a.__to__=null==b?a.duration:b,this.setCurrentTime(a.id,a.__from__).play(a.id)}catch(d){}a=null;return this},pause:function(a){if(y[a])try{y[a].pause()}catch(c){}return this},
pauseAll:function(){for(var a in y)this.pause(a);return this},mute:function(a,c){if(y[a])try{y[a].muted=c}catch(b){}},vol:function(a,c){if(y[a])try{y[a].volume=c}catch(b){}return this},loop:function(a,c){if(y[a])try{y[a].loop=c}catch(b){}return this},replay:function(a){this.setCurrentTime(a,0).play(a);return this},setCurrentTime:function(a,c){var b=y[a];if(b)try{0>c?c=0:c>b.duration&&(c=b.duration),b.currentTime=c||0}catch(d){}return this},getAudio:function(a){return y[a]},del:function(a){var c=y[a];
c&&c.__timeupdateCallBack__&&(c.pause(),c.removeEventListener("timeupdate",c.__timeupdateCallBack__,!1),y[a]=null,delete y[a]);return this},base:function(){return m}},initAudio:function(a){if(!window.Audio)return this;if(0<a.length){y={};for(var 0="=b&&0==e?0:0<b&&0" c,b="0;b<a.length;b++)(c=a[b])&&l.setAudio(c.id,c.src,c.loop,c.autoplay,c.preload,c.autobuffer)}return" this},setrunfrequency:function(a){f.timeout="a;return" this},events:{keydown:function(a){d.keydowngo||(d.keydowngo="!0);d.keyUpGo||(d.keyUpGo=!0);d.keyPressedGo||" (d.keypressedgo="!0);d.keyDownCallBack=a;return" this},keyup:function(a){d.keydowngo||(d.keydowngo="!0);d.keyUpGo||(d.keyUpGo=!0);d.keyPressedGo||(d.keyPressedGo=!0);d.keyUpCallBack=a;return" this},orientationchange:function(a){d.orientationchange="a;return" this},touchstart:function(a){d.touchstart="a;return" this},touchend:function(a){d.touchend="a;return" this},touchmove:function(a){d.touchmove="a;return" this},touchcancel:function(a){d.touchcancel="a;return" this},click:function(a){d.clickcallback="a;return" this},="" mousedown:function(a){d.mousedowncallback="a;return" this},mouseup:function(a){d.mouseupcallback="a;return" this},mousemove:function(a){d.mousemovecallback="a;return" this},createevent:function(a,c){var="" b="document.getElementById(a);if(b){var" d="document.createEvent("HTMLEvents");d.initEvent(c,!1,!0);b.dispatchEvent(d)}},pageFocus:function(a){d.pageFocusCallBack=a;return" this},pageunfocus:function(a){d.pageunfocuscallback="a;return" this},base:function(){return="" m}},ui:{},graphics:{hcenter:1,vcenter:2,left:4,="" right:8,top:16,bottom:32},trans:{trans_none:0,trans_rot90:5,trans_rot180:3,trans_rot270:6,trans_mirror:2,trans_mirror_rot90:7,trans_mirror_rot180:1,trans_mirror_rot270:4},request:{init:function(){l.initurlparams(window.leiyoohref?window.leiyoohref:location.href)},get:function(a){return="" da[a]?da[a]:""}}}.init(),$="document.getElementsByTagName("head")[0],I=null,aa=null,ba=null,ca=null,ga=function(){aa&&(clearTimeout(aa),aa=null)};link.getScript=function(a){if(!$||I)return!1;a=m.objExtend({url:"",before:function(){}," success:function(){},error:function(){},timeout:5e3,contenttype:"text="" javascript",destroyed:!0},a||{});""!="a.url&&(a.before(),I=document.createElement("script"),I.type=a.contentType,I.async=!0,I.src=a.url,I.destroyed=a.destroyed,ba=a.success,ca=a.error,I.onload=function(){ga();ba&&(ba(),ba=null);this.destroyed&&$.removeChild(this);I=null},$.appendChild(I),ga(),aa=setTimeout(function(){ga();ca&&(ca("timeout"),ca=null);I&&I.destroyed&&$.removeChild(I);I=null},a.timeout));a=null;return" m};var="" o="function(){return(65536*" (1+math.random())|0).tostring(16).substring(1)};link.getnewguid="function(){return" o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()};link.classes.observer="function(){this.group=[]};link.classes.Observer.prototype.register=function(a){if(null==a)return" this;-1="=m.comm.inArray(a,this.group)&&this.group.push(a);return" this};link.classes.observer.prototype.unregister="function(a){if(null==a)return" this;a="m.commandFuns.inArray(a,this.group);-1<a&&this.group.splice(a,1);return" this};link.classes.observer.prototype.notify="function(a){for(var" c="0;c<this.group.length;c++)if(null!=this.group[c])this.group[c](a);return" this};link.classes.observer.prototype.clear="function(){0<this.group.length&&this.group.splice(0,this.group.length);return" this};link.classes.timer="function(a,c,b,d,e){this.id=a;this._initTime=c;this._dateTime=Date.now();this.time=this._initTime;this.callBack=b;this.millisec=d||1E3;this.data=e;this.timeout=null};link.classes.Timer.prototype.stop=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=" null)};link.classes.timer.prototype.start="function(a){a&&(this.time=this._initTime,this._dateTime=Date.now());this.stop();this.timeout=setTimeout(function(a){var" websocket(this.ipport);this.socket.onopen="c;this.socket.onmessage=b;this.socket.onclose=" d;this.socket.onerror="e};link.classes.WebSocket.prototype.send=function(a){this.socket.send(a)};link.classes.WebSocket.prototype.close=function(){this.socket.close()};link.classes.observer=link.classes.Observer;link.classes.timer=link.classes.Timer;link.classes.webSocket=link.classes.websocket=link.classes.WebSocket;link.commandFuns=link.comm;link.commandFuns.collisionCheck=link.commandFuns.collision;link.commandFuns.circleCollisionCheck=link.commandFuns.circleCollision;link.initImage=link.pushImage})();" (function(g){var="">e?1:0<b&&0==e?2:0<b&&0<e?3:0==b&&0<e?4:0>b&&0<e?5:0>b&&0==e?6:0>b&&0>e?7:0};link.action={};link.action.Role=function(b,e,n,h,j,p,s,t){this.imageNames=j||[];this.rects=p||[];this.frames=s||[];this.actions=t||[];j=this.frames;p=this.actions;s=[];if(0<p.length){for(t=0;t<p.length;t++){for(var j="[],b=p[t].frames,w=0;w<b.length;w++)j.push({args:[b[w][0],b[w][1],b[w][2]],step:b[w][3]});s.push(new" g.action.sprite(j,p[t].loop,0))}b="s}this.sprites=" b||[];this.x="e||0;this.y=n||0;this.step=this.dy=this.dx=0;this.id="";this.mapOffx=this.x;this.mapOffy=this.y;this.svy=this.svx=null;this._cr=this.current=h||0;this.zoom=1;this.angle=0;this._zooms=[];this._angles=[];this._moveDs=[4,7,5,5,6,-5,-5,-7];this._stopDs=[0,-3,1,1,2,-1,-1,-3];this._path=[];e=this.getSprite().getFrame();e=this.frames[e.args[0]];this._fA=e.fA;this.aR=e.aR;this.bR=e.bR;this._skipMoveDs=!1;this.onstart=this.onend=this._stopedAction=null;this._locked=!1;this.speed=5};link.action.Role.prototype.setSprite=" function(b,e,n){if(this._locked)return="" this;var="" h="void" 0!="b?b:0,j=0<=h?g.trans.TRANS_NONE:g.trans.TRANS_MIRROR;this._cr!=h&&(this._cr=h,0">h&&(h=Math.abs(h)),this.current=h>=this.sprites.length?this.sprites.length-1:h,1<this.sprites.length&&this.settrans(j),h=this.getsprite(),j=h.getframe(),e||h.setframe(0),n&&(this._stopedaction=this._cr),h=this.frames[j.args[0]],this._fa=h.fa,this.ar=h.ar,this.br=h.br);if(this.links)for(h=0;j=this.links[h];h++)j.setsprite(b,e,n);trans=null;return this};link.action.role.prototype.locksprite="function(){this._locked=!0;return" this};link.action.role.prototype.unlocksprite="function(){this._locked=!1;return" this};link.action.role.prototype.settrans="function(b){this.getSprite().trans=b;return" this};link.action.role.prototype.getsprite="function(b){return" this.sprites[null="=b?this.current:b]};link.action.Role.prototype.getFrame=function(b){return" this.frames[null="=b?this.getSprite().getFrame().args[0]:b]};link.action.Role.prototype.action=function(){var" b="this.getSprite();if(!b)return" this;="" var="" e="b.getFrame(),g,h=0,j=0;if(e){g=this.frames[e.args[0]];this._fA=g.fA;this.aR=g.aR;this.bR=g.bR;if(0<this._path.length)j=this._path.shift(),h=j[0]||0,j=j[1]||0,this._skipMoveDs||this.setSprite(this._moveDs[B(h,j)],!0),this.svx=h,this.svy=j,this.mapOffx+=this.svx,this.mapOffy+=this.svy;else" if(null!="this.svx&&null!=this.svy){this._skipMoveDs||(this.setSprite(this._stopedAction||this._stopDs[B(this.svx,this.svy)]),this._stopedAction=null);if(this.onend)this.onend(this);this._skipMoveDs=!1;this.svy=" this.svx="null}0<this._zooms.length&&(g=this._zooms.shift(),"number"==typeof" parseint(g)&&this.setzoom(g));0<this._angles.length&&(g="this._angles.shift(),"number"==typeof" parseint(g)&&this.setrotate(g));this.x+="e.args[1]+h;this.y+=e.args[2]+j}b.nextFrame();return" this};link.action.role.prototype.render="function(){var" -p));for(var="" t="0;t<n;t++)j=this.rects[e[t][0]][e[t][1]],p=this.imageNames[e[t][0]],s=g.getImage(p),b==g.trans.TRANS_NONE?h.drawImage(p,j[0],j[1],j[2],j[3],1==this.zoom?parseInt(this.x+this.dx+e[t][2]*this.zoom):this.x+this.dx+e[t][2]*this.zoom,1==this.zoom?parseInt(this.y+this.dy+e[t][3]*this.zoom):this.y+this.dy+e[t][3]*this.zoom,j[2]*this.zoom,j[3]*this.zoom):1==this.zoom?h.drawRegion(p,j[0],j[1],j[2],j[3],b,parseInt(this.x+this.dx-(e[t][2]+j[2])),parseInt(this.y+this.dy+e[t][3])):h.drawRegionAndZoom(p," j[0],j[1],j[2],j[3],b,this.x+this.dx-(e[t][2]+j[2])*this.zoom,this.y+this.dy+e[t][3]*this.zoom,null,j[2]*this.zoom,j[3]*this.zoom),!s.loaded&&s.bench&&h.drawimage(s.bench.id||s.benchid,s.bench.sx||0,s.bench.sy||0,s.bench.sw||s.bench.w,s.bench.sh||s.bench.h,parseint(this.x+this.dx-(s.bench.w*this.zoom="">>1)),parseInt(this.y+this.dy-s.bench.h*this.zoom),s.bench.w*this.zoom,s.bench.h*this.zoom);e[0]&&g.canvas.restore()}return this};link.action.Role.prototype.setZoom=function(b){this.zoom=b;return this};
link.action.Role.prototype.setZoomTransition=function(b){b&&0<b.length&&(this._zooms=b);return 0="=this._zooms.length};link.action.Role.prototype.getBodyRect=function(b,e){var" this};link.action.role.prototype.endzoomtransition="function(){return" n="this.getSprite(null!=b?Math.abs(b):null);if(!n)return" null;var="" h="n.getFrame(e);if(!h)return" null;h="this.frames[h.args[0]].bR;return" null="=b&&n.trans!=g.trans.TRANS_NONE||0">b?[-(h[0]+h[2]*this.zoom),h[1]*this.zoom,h[2]*this.zoom,h[3]*this.zoom]:[h[0]*this.zoom,
h[1]*this.zoom,h[2]*this.zoom,h[3]*this.zoom]};link.action.Role.prototype.getAttackRect=function(b,e){var n=this.getSprite(null!=b?Math.abs(b):null);if(!n)return null;var h=n.getFrame(e);if(!h)return null;h=this.frames[h.args[0]].aR;return null==b&&n.trans!=g.trans.TRANS_NONE||0>b?[-(h[0]+h[2]*this.zoom),h[1]*this.zoom,h[2]*this.zoom,h[3]*this.zoom]:[h[0]*this.zoom,h[1]*this.zoom,h[2]*this.zoom,h[3]*this.zoom]};link.action.Role.prototype.setStep=function(b){this.step=b||0;for(var e=0,g=this.sprites.length;e<
g;e++)this.sprites[e].setStep(b);return this};link.action.Role.prototype.collision=function(b,e,n){if(!b)return!1;var e=e||"aR",n=n||"aR",h,j;"aR"==e?h=this.aR:"bR"==e&&(h=this.bR);"aR"==n?j=b.aR:"bR"==n&&(j=b.bR);return h&&j?g.comm.collision(this.getSprite().trans==g.trans.TRANS_NONE?parseInt(this.x+this.dx+h[0]*this.zoom):parseInt(this.x+this.dx-(h[0]+h[2])*this.zoom),parseInt(this.y+this.dy+h[1]*this.zoom),parseInt(h[2]*this.zoom),parseInt(h[3]*this.zoom),b.getSprite().trans==g.trans.TRANS_NONE?
parseInt(b.x+b.dx+j[0]*b.zoom):parseInt(b.x+b.dx-(j[0]+j[2])*b.zoom),parseInt(b.y+b.dy+j[1]*b.zoom),parseInt(j[2]*b.zoom),parseInt(j[3]*b.zoom)):!1};link.action.Role.prototype.collisionInput=function(b,e,n,h,j){var j=j||"aR",p;"aR"==j?p=this.aR:"bR"==j&&(p=this.bR);return p?g.comm.collision(this.getSprite().trans==g.trans.TRANS_NONE?parseInt(this.x+this.dx+p[0]*this.zoom):parseInt(this.x+this.dx-(p[0]+p[2])*this.zoom),parseInt(this.y+this.dy+p[1]*this.zoom),parseInt(p[2]*this.zoom),parseInt(p[3]*
this.zoom),b,e,n,h):!1};link.action.Role.prototype.setLoop=function(b){for(var e=0,g=this.sprites.length;e<g;e++)this.sprites[e].setloop(b);return 0="=this._path.length};link.action.Role.prototype.clearPath=" this};link.action.role.prototype.setpath="function(b,e){this._path=b||[];if(0<this._path.length&&this.onstart)this.onstart(this);e&&(this._skipMoveDs=!0);return" this};link.action.role.prototype.concatpath="function(b){this._path=this._path.concat(b||[]);return" this};link.action.role.prototype.endpath="function(){return" function(){this._path="[];return" this};link.action.role.prototype.moveto="function(b,e,n){n&&(this.speed=Math.abs(n));this.setPath(g.comm.createPath(this.mapOffx,this.mapOffy,b,e,this.speed));return" this};link.action.role.prototype.setmoveds="function(b){this._moveDs=b||[4,7,5,5,6,-5,-5,-7];return" this};link.action.role.prototype.setstopds="function(b){this._stopDs=b||[0,-3,1,1,2,-1,-1,-3];return" this};link.action.role.prototype.mark="function(b,e,g,h){null!=b&&(this.x=b);null!=e&&(this.y=e);null!=g&&" (this.mapoffx="g);null!=h&&(this.mapOffy=h);return" this};link.action.role.prototype.setspeed="function(b,e){b&&(this.speed=Math.abs(b));this.nodeXStep=b;this.nodeYStep=e;return" this};link.action.role.prototype.setrotate="function(b){this.angle=Math.abs(b)||0;return" this};link.action.role.prototype.setrotatetransition="function(b){b&&0<b.length&&(this._angles=b);return" this};link.action.role.prototype.endrotatetransition="function(){return" e){null!="b&&(this.x+=b);null!=e&&(this.y+=e);return" this};link.action.role.prototype.rotate="function(b){null!=b&&(this.angle+=b);return" this};link.action.role.prototype.stoped="function(){return" null="=this.svx};link.action.Role.prototype.getCurrent=function(){return" this.current*(this.getsprite().trans="=g.trans.TRANS_NONE?1:-1)};link.action.Sprite=function(b,e,n,h){this.frames=b||[];this.loop=e;this.current=n||0;this.step=h||0;this.trans=g.trans.TRANS_NONE;this.setFrame(n);this.runStep=this.getFrame().step||" this.step};link.action.sprite.prototype.setframe="function(b){this.current=b">=this.frames.length?this.frames.length-1:0<b?b:0;this.getframe().step&&(this.runstep=this.getframe().step);return this};link.action.sprite.prototype.getframe="function(b){return" this.frames[null="=b?this.current:b]};link.action.Sprite.prototype.nextFrame=function(){if(!this.loop&&this.endFrame())return" this;0<this.frames.length&&(0="">=this.runStep?(this.loop?(this.current++,this.current%=this.frames.length):this.current<this.frames.length- 1&&this.current++,this.runstep="this.getFrame().step?this.getFrame().step:this.step):this.runStep--);return" this};link.action.sprite.prototype.preframe="function(){0<this.frames.length&&(0">=this.runStep?(this.loop?(this.current--,0>this.current&&(this.current=this.frames.length-1)):0<this.current&&this.current--,this.runstep=this.getframe().step?this.getframe().step:this.step):this.runstep--);return this};link.action.sprite.prototype.endframe="function(b){var" e="this.frames.length-1;null!=b&&(0<=b&&b<=" this.frames.length-1)&&(e="b);return" this.current="">=e&&0==this.runStep};link.action.Sprite.prototype.firstFrame=function(){return 0==this.current&&0==this.runStep};link.action.Sprite.prototype.setStep=function(b){this.step=b||0;this.runStep=this.getFrame().step||this.step;return this};link.action.Sprite.prototype.setLoop=function(b){this.loop=b;return this};var C;link.action.Fragment=function(b){this.sprites=b||[]};link.action.Fragment.prototype.queue=function(){0<this.sprites.length?0<this.sprites[0].frames.length&& (0="">=this.sprites[0].runStep?(this.sprites[0].runStep=this.sprites[0].step,C=this.sprites[0].frames.shift(),0==this.sprites[0].frames.length&&this.sprites.shift()):(C=this.sprites[0].getFrame(),this.sprites[0].runStep--)):C=null;return C};g.action.role=g.action.Role;g.action.sprite=g.action.Sprite;g.action.fragment=g.action.Fragment})(link);
(function(g){var B=navigator.userAgent.toLowerCase(),C=!1;0<=b.indexof("android")&&0<=b.indexof("chrome")&&(c=!0);g.init(320,550).pushimage([{id:"bg1",src:"img bg1.jpg"},{id:"bg2",src:"img_games="" bird="" img="" bg2.jpg"},{id:"s1",src:"img_games="" s1.png?123"}]).asyncimage([{id:"s2",src:"img_games="" s2.png"},{id:"n1",src:"img_games="" number1.png"},{id:"n2",src:"img_games="" number2.png"}]);c||g.initaudio([{id:"sound1",src:"img_games="" sound1.mp3",loop:!1,preload:!0}]);g.pageload(function(){var="" b,e,n,h,j,p,s,t;window.scrollto(0,1);var="" w,e;g.canvas.screen.setheight(550<="" window.innerheight?550:window.innerheight);w="g.canvas.screen.getWidth();E=g.canvas.screen.getHeight();_newDate=Date.now();var" a,d="[];A={Button:g.extend(function(b){this.props=g.objExtend({id:"",value:"",x:0,y:0,width:60,height:30,img:null,color:"#000",strokeColor:"#FFF",bgColor:"",font:"20px" \u5fae\u8f6f\u96c5\u9ed1"},b||{});this.collision(0,0,0,0)},null,{collision:function(b,d,e,f,h){this._released="this._repeated=this._pressed=!1;if(g.comm.collision(b,d,e,f,parseInt(this.props.x),parseInt(this.props.y)," parseint(this.props.width),parseint(this.props.height))){switch(h){case="" "mousedown":case="" "touchstart":this._repeated="this._pressed=!0;break;case" "mouseup":case="" "touchend":this._released="!0}g.audio.playRange("sound1",9,11)}return" this},pressed:function(){var="" b="this._pressed;this._pressed=!1;return" b},repeated:function(){return="" this._repeated},released:function(){var="" b},render:function(){this.props.img?g.canvas.drawimage(this.props.img.id,this.props.img.sx,="" this.props.img.sy,this.props.img.sw,this.props.img.sh,parseint(this.props.x),parseint(this.props.y),parseint(this.props.width),parseint(this.props.height)):""!="this.props.bgColor&&g.canvas.fillStyle(this.props.bgColor).fillRect(parseInt(this.props.x),parseInt(this.props.y),parseInt(this.props.width),parseInt(this.props.height));if(""!=this.props.value){var">>1)),parseInt(this.props.y+
(this.props.height-b.height>>1))+b.height-2,"",!0,this.props.color,this.props.strokeColor,this.props.font)}return this}}),getButton:function(b){for(var d,e=D.length-1;0<=e;e--)if(d=d[e],d.id==b)return d;return="" null},appendbutton:function(b){var="" d;b&&!this.getbutton(b.id)&&d.push(d="new" this.button(b));return="" d},removebutton:function(b){for(var="" d,e="D.length-1;0<=e;e--)if(d=D[e],d.id==b){D.splice(e,1);break}return" this},clearbuttons:function(){d="[];return" this},actionbutton:function(b,d,e){for(var="" f,="" g="D.length-1;0<=g;g--)f=D[g],f.collision(d,e,1,1,b);return" this},renderbutton:function(){for(var="" b,d="D.length-1;0<=d;d--)(b=D[d])&&b.render();return" this}};var="" b="g.canvas.screen.getDevice(),x={bird:null,bgType:0,isGameOver:!1,bgColor:"#000",bgX:0,bgY:0,bgImgW:288,bgImgH:512,bgWidth:0,bgHeight:0,speed:0,landX:0,landY:0,landW:672,landH:112,g:"android"==B&&!C?0.7:1.5,jumpSpeed:"android"==B&&!C?-8:-12,vy:0,obses:[],obsDate:null,obsTimeout:1800,obsFrameNum:57,obsCurrentFrame:0,obsState:"ready",score:0," scoreobsid:"",obsmapping:{mp1:{id:"s2",sx:112,sy:130,width:52,height:320},mp2:{id:"s2",sx:168,sy:130,width:52,height:320},mp3:{id:"s2",sx:0,sy:130,width:52,height:320},mp4:{id:"s2",sx:56,sy:130,width:52,height:320}},screenflush:[],birdspriteid:0,bgid:1,init:function(b,d){this.isgameover="!1;this.bgWidth=3*this.bgImgW;this.bgHeight=E;this.speed=-3;this.obses=[];this.obsDate=null;this.score=0;this.scoreObsId="";this.setBird(this.birdSpriteId,b,d).setBg(this.bgId).landInit();null==b&&(this.birdSpriteId++," this.birdspriteid%="3,this.bgId++,2<this.bgId&&(this.bgId=1));this.screenFlush=[];this.obsCurrentFrame=0;return" this},start:function(){this.initobses().birdjump();x.bird.state="flying" ;return="" this},setbg:function(b){this.bgtype="b;switch(this.bgType){default:b="bg1";this.bgColor="#4EC0CA";break;case" 2:b="bg2" ,this.bgcolor="#038794" }g.canvas.pass("bgcache",this.bgwidth,this.bgheight).drawimage(b,0,this.bgheight-this.bgimgh).drawimage(b,this.bgimgw,this.bgheight-this.bgimgh).pass();return="" this},bgrender:function(){g.canvas.fillstyle(this.bgcolor).fillscreen().drawcache("bgcache",="" this.bgx,this.bgy);return="" this},gameover:function(){this.screenfade();this.isgameover="!0;return" this},screenfade:function(){this.isgameover||(this.screenflush="[1,0.9,0.8,0.7,0.6,0.5,0.4,0.3,0.2,0.1,0],g.audio.pauseAll().playRange("sound1",5,6),window.dp_submitScore&&dp_submitScore(g.localStorage.getItem("FlappyBirdBestScore"),x.score));return" this},initobses:function(){this.obses="[];this.obsDate=Date.now();this.obsState="ready";return" this},popobs:function(){var="" x:w,y:-(d.height-b),width:52,height:320,imgobj:d});this.obses.push({id:g.getnewguid(),x:w,y:b+100,width:52,height:320,imgobj:e});return="" this},objesaction:function(){if(!this.obsdate)return="" this;switch(this.obsstate){case="" "ready":500<="_newDate-this.obsDate&&(this.obsState="run");break;case" "run":for(var="">=d.x&&this.obses.splice(b,1);this.obsCurrentFrame++==this.obsFrameNum&&
(this.obsCurrentFrame=0,this.obsDate=_newDate,this.popObs())}if((b=this.obses[0])&&b.id!=this.scoreObsId&&b.x<this.bird.x-26)this.scoreobsid=b.id,this.score++;return this},objesrender:function(){for(var="" b,d="0,e;e=this.obses[d];d++)b=e.imgObj,g.canvas.drawImage(b.id,b.sx,b.sy,b.width,b.height,e.x,e.y,b.width,b.height);return" this},setbird:function(b,d,e){this.bird||(this.bird="FlappyBird);this.bird.mark(d||88,e||this.bgHeight-246).setSprite(b).setStep(2).setRotate(0).setLoop(!0).state="waiting";this.vy=" 0;return="" this},birdjump:function(){this.isgameover||(this.vy="this.jumpSpeed,g.audio.playRange("sound1",0,1));return" this},birdaction:function(){if(this.bird)switch(this.bird.action(),this.bird.state){case="" "waiting":this.bird.endpath()&&this.bird.setpath([[0,-1.5],[0,-1.5],[0,-1.5],[0,-1.5],[0,-1.5],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,1.5],[0,1.5],[0,1.5],[0,1.5],[0,1.5],[0,1],[0,1],[0,1],[0,1],[0,1]],!0);break;case="" "flying":this.vy+="this.g;if(this.bird.collisionInput(0,this.bgHeight-this.landH-" this.vy,this.landw,this.landh,"br")){this.bird.clearpath().setrotate(90).state="die" ;this.bird.y="this.bgHeight-this.landH-(this.bird.getBodyRect()[3]">>1);break}this.bird.y+=this.vy;0>this.bird.y&&(this.bird.y=0);if(0<=this.vy){var b="3*this.vy;this.bird.setRotate(90<b?90:b)}else" this.bird.setrotate(330);break;case="" "die":this.gameover(),this.bird.setloop(!1),this.bird.state="" }return="" this},birdrender:function(){this.bird&&this.bird.render();return="" this},landinit:function(){this.landx="0;this.landY=this.bgHeight-" this.landh;g.canvas.pass("landcache",this.landw,this.landh).drawimage("s1",0,0,336,112,0,0,336,112).drawimage("s1",0,0,336,112,336,0,336,112).pass();return="" this},landaction:function(){this.landx+="this.speed;this.landX=this.landX<this.landW-this.bgWidth-this.speed?0:this.landX;return" this},landrender:function(){g.canvas.drawcache("landcache",this.landx,this.landy);return="" this},scorerender:function(){g.canvas.drawnumber(this.score,"n1",24,36,0,50,"center");return="" this},action:function(){_newdate="Date.now();" this.isgameover||this.objesaction().landaction();this.birdaction();return="" this},screenflushrender:function(){0<this.screenflush.length&&(g.canvas.fillstyle("rgba(255,="" 255,="" "+this.screenflush.shift()+")").fillscreen(),0="=this.screenFlush.length&&(g.audio.playRange("sound1",7,8),A.clearButtons(),b=0,e=-1,(g.localStorage.getItem("FlappyBirdBestScore")||0)<x.score?(g.localStorage.setItem("FlappyBirdBestScore",x.score),n=!0):n=!1,h=parseInt(g.localStorage.getItem("FlappyBirdBestScore")||0),j=d,p=" [-3,-2,-1,1,2,3],s="d+500,t=[-200,-100,-70,-40,-20,-10,-5],u=A.appendButton({id:"playBtn",x:f+40,y:d+180,width:112,height:66,img:{id:"s1",sx:120,sy:236,sw:112,sh:66}}),F=A.appendButton({id:"rankBtn",x:f+150,y:d+180,width:112,height:66,img:{id:"s1",sx:240,sy:236,sw:112,sh:66}}),g.gameFlow.over()));return" this},render:function(){this.bgrender().objesrender().birdrender().landrender().scorerender().screenflushrender();return="" this}},f="w-300">>1,d=E-240>>1,u,F,S=function(){x.init();A.clearButtons();g.gameFlow.zone()},
K=function(){g.audio.playRange("sound1",0,1);x.start();A.clearButtons();g.gameFlow.run()},J={values:[],opacity:0,callBack:null,init:function(){this.values=[];this.opacity=0;this.callBack=null;return this},fadeIn:function(b){if(0<this.values.length)return this;this.values="[0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1];this.callBack=b;return" this},fadeout:function(b){if(0<this.values.length)return="" this},action:function(){0<="" this.values.length&&(this.opacity="this.values.shift(),0==this.values.length&&this.callBack&&this.callBack());return" this},render:function(){0<this.opacity&&g.canvas.fillstyle("rgba(0,="" 0,="" "+this.opacity+")").fillscreen();return="" this}};j="0;p=[];s=0;t=[];b=0;e=-1;h=0;n=!1;g.run(function(){x.action().render();J.action().render()}).menu(function(){x.birdAction().landAction().bgRender().birdRender().landRender();g.canvas.drawImage("s1",118,182,178,48,f+61,d,178,48);A.renderButton();u&&u.released()&&" j.fadein(function(){s();j.fadeout()});f&&f.released()&&window.dp_ranking&&dp_ranking();j.action().render()}).zone(function(){x.birdaction().landaction().bgrender().birdrender().landrender().scorerender();g.canvas.drawimage("s1",2,118,192,58,f+54,d,192,58).drawimage("s1",0,182,114,98,f+93,e-280,114,98);j.action().render()}).over(function(){x.birdaction().bgrender().birdrender().landrender();g.canvas.drawimage("s1",202,118,200,50,f+50,j,200,50).drawimage("s2",2,2,234,122,f+33,s,234,122);switch(b){case="" 0:0<="" p.length?j+="p.shift():0<t.length?s+=t.shift():b=1;break;case" 1:e++;e="">=x.score&&(b=2);break;case 2:A.renderButton(),n&&g.canvas.drawImage("s2",224,486,32,14,f+68,d+146,32,14)}0<=e&&g.canvas.drawnumber(e,"n2",14,20,f+240,d+90,!1).drawnumber(h,"n2",14,20,f+240,d+130,!1);u&&u.released()&&j.fadein(function(){s();j.fadeout()});f&&f.released()&&window.dp_ranking&&dp_ranking();j.action().render()}).events.mousedown(function(){x.birdjump()}).touchstart(function(){x.birdjump()}).mouseup(function(b,d,e){a.actionbutton(b.type, d,e,10,10);g.gameflow.isin("zone")&&k()}).touchend(function(b,d,e){window.scrollto(0,1);a.actionbutton(b.type,d,e,10,10);g.gameflow.isin("zone")&&k()});x.init(w="">>1,d+90);A.clearButtons();u=A.appendButton({id:"playBtn",x:f+40,y:d+180,width:112,height:66,img:{id:"s1",sx:120,sy:236,sw:112,sh:66}});F=A.appendButton({id:"rankBtn",x:f+150,y:d+180,width:112,height:66,img:{id:"s1",sx:240,sy:236,sw:112,sh:66}});g.gameFlow.menu()})})(link);var FlappyBird,FlappyBirdNameSpace={};
(function(g){g.asyncImage([{id:"s2",src:"img_games/bird/img/s2.png"}]);var B=["s2"],C=[[[230,142,34,24],[230,194,34,24],[230,246,34,24],[230,298,34,24],[230,350,34,24],[174,466,34,24],[118,466,34,24],[62,466,34,24],[6,466,34,24]]],b=[{aR:[-15,-30,30,30],bR:[-16,-15,32,31],fA:[[0,5,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-15,32,31],fA:[[0,0,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-15,32,31],fA:[[0,1,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-16,32,32],fA:[[0,2,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-16,32,32],
fA:[[0,3,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-16,32,32],fA:[[0,4,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-16,32,32],fA:[[0,8,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-16,32,32],fA:[[0,7,-16,-11,0]]},{aR:[-15,-30,30,30],bR:[-16,-16,32,32],fA:[[0,6,-16,-11,0]]}],e=[{loop:!0,frames:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[1,0,0,0]]},{loop:!0,frames:[[3,0,0,0],[4,0,0,0],[5,0,0,0],[4,0,0,0]]},{loop:!0,frames:[[6,0,0,0],[7,0,0,0],[8,0,0,0],[7,0,0,0]]}];FlappyBirdNameSpace.get=function(n,h){return new g.action.role([],
0,0,0,h?h:B,C,b,(0</=e&&g.canvas.drawnumber(e,"n2",14,20,f+240,d+90,!1).drawnumber(h,"n2",14,20,f+240,d+130,!1);u&&u.released()&&j.fadein(function(){s();j.fadeout()});f&&f.released()&&window.dp_ranking&&dp_ranking();j.action().render()}).events.mousedown(function(){x.birdjump()}).touchstart(function(){x.birdjump()}).mouseup(function(b,d,e){a.actionbutton(b.type,></this.values.length)return></=this.vy){var></this.bird.x-26)this.scoreobsid=b.id,this.score++;return></=e;e--)if(d=d[e],d.id==b)return></=b.indexof("android")&&0<=b.indexof("chrome")&&(c=!0);g.init(320,550).pushimage([{id:"bg1",src:"img></this.sprites.length?0<this.sprites[0].frames.length&&></this.current&&this.current--,this.runstep=this.getframe().step?this.getframe().step:this.step):this.runstep--);return></this.frames.length-></b?b:0;this.getframe().step&&(this.runstep=this.getframe().step);return></g;e++)this.sprites[e].setloop(b);return></b.length&&(this._zooms=b);return></this.sprites.length&&this.settrans(j),h=this.getsprite(),j=h.getframe(),e||h.setframe(0),n&&(this._stopedaction=this._cr),h=this.frames[j.args[0]],this._fa=h.fa,this.ar=h.ar,this.br=h.br);if(this.links)for(h=0;j=this.links[h];h++)j.setsprite(b,e,n);trans=null;return></p.length){for(t=0;t<p.length;t++){for(var></e?5:0></b&&0==e?2:0<b&&0<e?3:0==b&&0<e?4:0></a.length){y={};for(var></d;b++)if((c=a[b])&&!s[c.id])s[c.id]=!0,f.push(a[b]);return></q;f++)this.drawimage(c,parseint(a.charat(f))*b,0,b,d,e+f*h,g,h,j);else></=a.height?e:a.height-b),d?e?q?(g=l.getanchor(g,h,f,j,q),k.drawimage(a,c,b,d,e,g.x,g.y,f,j)):k.drawimage(a,c,b,d,e,g,h,f,j):(g=l.getanchor(c,b,a.width,a.height,d),k.drawimage(a,g.x,g.y)):k.drawimage(a,c,b);return></=a.width?d:a.width-c),null!=e&&null!=j&&(e=0></=j.height?d:j.height-i),j.loaded&&(b?d?q?(g=l.getanchor(e,g,h,f,q),k.drawimage(j,c,i,b,d,g.x,></=j.width?b:j.width-c),null!=d&&null!=f&&(d=0></a&&(d=a);return></c&&l.loadingcallback(i,c,"image")}break;case></f.length?m.loadimage(f):l.pageloaded()},!1));return></ja;i++)y.push(z%10),z=parseint(z></r.pool.length){r.xhrobj=this.objextend(r.param,r.pool.shift()||{});var></=a.indexof("?")){var></d;b++)if("string"==i&&this[b][a]==c||"number"==i&&this[b]==a){v=b;break}return></v;i++)c=regexp("\\{"+(i-1)+"\\}","gm"),a=a.replace(c,arguments[i]);return>